{"ast":null,"code":"import _taggedTemplateLiteral from\"N:/Projects/slack_clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _slicedToArray from\"N:/Projects/slack_clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject,_templateObject2;import'./App.css';import{BrowserRouter as Router,Route,Switch}from'react-router-dom';import Chat from'./components/Chat';import Login from'./components/Login';import styled from'styled-components';import Header from'./components/Header';import Sidebar from'./components/Sidebar';import db from'./firebase';import{useEffect,useState}from'react';import{auth,provider}from'./firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),rooms=_useState2[0],setRooms=_useState2[1];var _useState3=useState(JSON.parse(localStorage.getItem('user'))),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var getChannels=function getChannels(){db.collection('rooms').onSnapshot(function(snapshot){setRooms(snapshot.docs.map(function(doc){return{id:doc.id,name:doc.data().name};}));});};useEffect(function(){getChannels();},[]);var signOut=function signOut(){auth.signOut().then(function(){localStorage.removeItem('user');setUser(null);});};console.log(\"user in app state : \",user);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(Router,{children:!user?/*#__PURE__*/_jsx(Login,{setUser:setUser}):/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Header,{signOut:signOut,user:user}),/*#__PURE__*/_jsxs(Main,{children:[/*#__PURE__*/_jsx(Sidebar,{rooms:rooms}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/room/:channelId\",children:/*#__PURE__*/_jsx(Chat,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/\",children:\"select or create chanel\"})]})]})]})})});}export default App;var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  weight: 100%;\\n  height: 100vh;\\n  background-color: purple;\\n  display: grid;\\n  grid-template-rows: 40px minmax(0, 1fr);\\n \"])));var Main=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n display: grid;\\n grid-template-columns: 260px auto;\\n background-color: white;\\n \"])));","map":{"version":3,"sources":["N:/Projects/slack_clone/src/App.js"],"names":["BrowserRouter","Router","Route","Switch","Chat","Login","styled","Header","Sidebar","db","useEffect","useState","auth","provider","App","rooms","setRooms","JSON","parse","localStorage","getItem","user","setUser","getChannels","collection","onSnapshot","snapshot","docs","map","doc","id","name","data","signOut","then","removeItem","console","log","Container","div","Main"],"mappings":"iVACA,MAAO,WAAP,CACA,OAAQA,aAAa,GAAIC,CAAAA,MAAzB,CAAiCC,KAAjC,CAAwCC,MAAxC,KAAqD,kBAArD,CACA,MAAQC,CAAAA,IAAR,KAAmB,mBAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,oBAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,qBAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,sBAApB,CACA,MAAOC,CAAAA,EAAP,KAAe,YAAf,CACA,OAAQC,SAAR,CAAmBC,QAAnB,KAAkC,OAAlC,CACA,OAAQC,IAAR,CAAcC,QAAd,KAA6B,YAA7B,C,wFAEA,QAASC,CAAAA,GAAT,EAAe,eACaH,QAAQ,CAAC,EAAD,CADrB,wCACNI,KADM,eACCC,QADD,8BAEWL,QAAQ,CAACM,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAD,CAFnB,yCAENC,IAFM,eAEAC,OAFA,eAGb,GAAMC,CAAAA,WAAW,CAAE,QAAbA,CAAAA,WAAa,EAAK,CACtBd,EAAE,CAACe,UAAH,CAAc,OAAd,EAAuBC,UAAvB,CAAkC,SAACC,QAAD,CAAY,CAC5CV,QAAQ,CAAEU,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAACC,GAAD,CAAO,CACjC,MAAO,CAACC,EAAE,CAAED,GAAG,CAACC,EAAT,CAAaC,IAAI,CAAEF,GAAG,CAACG,IAAJ,GAAWD,IAA9B,CAAP,CACD,CAFS,CAAF,CAAR,CAGD,CAJD,EAKD,CAND,CAQArB,SAAS,CAAC,UAAM,CACda,WAAW,GACZ,CAFQ,CAEP,EAFO,CAAT,CAIE,GAAMU,CAAAA,OAAO,CAAE,QAATA,CAAAA,OAAS,EAAK,CAClBrB,IAAI,CAACqB,OAAL,GAAeC,IAAf,CAAoB,UAAI,CACtBf,YAAY,CAACgB,UAAb,CAAwB,MAAxB,EACAb,OAAO,CAAC,IAAD,CAAP,CACD,CAHD,EAID,CALD,CAMDc,OAAO,CAACC,GAAR,CAAY,sBAAZ,CAAoChB,IAApC,EACD,mBACE,YAAK,SAAS,CAAC,KAAf,uBACA,KAAC,MAAD,WAEI,CAACA,IAAD,cACA,KAAC,KAAD,EAAO,OAAO,CAAEC,OAAhB,EADA,cAIF,MAAC,SAAD,yBACE,KAAC,MAAD,EAAQ,OAAO,CAAEW,OAAjB,CAA0B,IAAI,CAAEZ,IAAhC,EADF,cAEE,MAAC,IAAD,yBACE,KAAC,OAAD,EAAS,KAAK,CAAGN,KAAjB,EADF,cAEE,MAAC,MAAD,yBACE,KAAC,KAAD,EAAO,IAAI,CAAC,kBAAZ,uBACE,KAAC,IAAD,EAAM,IAAI,CAAGM,IAAb,EADF,EADF,cAIE,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,qCAJF,GAFF,GAFF,GANF,EADA,EADF,CA0BD,CAED,cAAeP,CAAAA,GAAf,CACC,GAAMwB,CAAAA,SAAS,CAAGhC,MAAM,CAACiC,GAAV,kMAAf,CAQA,GAAMC,CAAAA,IAAI,CAAGlC,MAAM,CAACiC,GAAV,uJAAV","sourcesContent":[" \nimport './App.css';\nimport {BrowserRouter as Router, Route, Switch} from 'react-router-dom'\nimport  Chat  from './components/Chat'\nimport Login from './components/Login'\nimport styled from 'styled-components'\nimport Header from './components/Header'\nimport Sidebar from './components/Sidebar'\nimport db from './firebase'\nimport {useEffect, useState} from 'react'\nimport {auth, provider} from './firebase'\n\nfunction App() {\n  const [rooms, setRooms] = useState([])\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('user')))\n  const getChannels =() =>{\n    db.collection('rooms').onSnapshot((snapshot)=>{\n      setRooms (snapshot.docs.map((doc)=>{\n        return {id: doc.id, name: doc.data().name}\n      }))\n    })\n  }\n  \n  useEffect(() => {\n    getChannels()\n  },[])\n\n    const signOut =() =>{\n      auth.signOut().then(()=>{\n        localStorage.removeItem('user')\n        setUser(null)\n      })\n    }\n   console.log(\"user in app state : \", user)\n  return (\n    <div className=\"App\">\n    <Router>\n      {\n        !user ?\n        <Login setUser={setUser}/>\n        :\n     \n      <Container>\n        <Header signOut={signOut} user={user}/>\n        <Main>\n          <Sidebar rooms= {rooms} />\n          <Switch>\n            <Route path=\"/room/:channelId\">\n              <Chat user= {user} />\n            </Route>\n            <Route path=\"/\">\n              select or create chanel\n            </Route>\n          </Switch>\n        </Main>\n      </Container>\n       }\n    </Router>\n    </div>\n  );\n}\n\nexport default App;\n const Container = styled.div`\n  weight: 100%;\n  height: 100vh;\n  background-color: purple;\n  display: grid;\n  grid-template-rows: 40px minmax(0, 1fr);\n `\n\n const Main = styled.div`\n display: grid;\n grid-template-columns: 260px auto;\n background-color: white;\n `\n"]},"metadata":{},"sourceType":"module"}